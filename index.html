<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MTI MED (1st YEAR) GPA Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5f7fa;
      padding: 2rem;
      max-width: 900px;
      margin: auto;
    }
    h1, h2 {
      text-align: center;
    }
    select {
      padding: 0.4rem;
      width: 100%;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 0.5rem;
      text-align: center;
    }
    .semester {
      margin-top: 3rem;
    }
    button {
      padding: 0.7rem;
      background-color: #007bff;
      color: white;
      border: none;
      cursor: pointer;
      width: 100%;
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <h1>MTI MED (1st YEAR) GPA CALCULATOR</h1>

  <div class="semester">
    <h2>First Semester GPA</h2>
    <table>
      <thead>
        <tr>
          <th>Course</th>
          <th>Credit Hours</th>
          <th>Grade</th>
        </tr>
      </thead>
      <tbody id="s1-table"></tbody>
    </table>
    <h3 id="s1-gpa"></h3>
  </div>

  <div class="semester">
    <h2>Second Semester GPA</h2>
    <table>
      <thead>
        <tr>
          <th>Course</th>
          <th>Credit Hours</th>
          <th>Grade</th>
        </tr>
      </thead>
      <tbody id="s2-table"></tbody>
    </table>
    <h3 id="s2-gpa"></h3>
  </div>

  <h2 id="cgpaDisplay"></h2>

  <script>
    const gpaScale = {
      'A+': 4.00,
      'A': 3.67,
      'B+': 3.33,
      'B': 3.00,
      'C+': 2.67,
      'C': 2.33,
      'D': 2.00,
      'F': 0.00
    };

    const semester1Courses = [
      { name: 'Anatomy', credits: 3 },
      { name: 'Physiology', credits: 2 },
      { name: 'Histology', credits: 2 },
      { name: 'Biochemistry', credits: 4 },
      { name: 'Immunology', credits: 2 },
      { name: 'Genetics', credits: 2 },
    ];

    const semester2Courses = [
      { name: 'General Pathology', credits: 3 },
      { name: 'General Pharmacology', credits: 2 },
      { name: 'Hematology', credits: 4 },
      { name: 'ECE', credits: 1 },
      { name: 'Musculoskeletal1', credits: 5 },
      { name: 'Neuroscience', credits: 2 },
    ];

    function createTableRow(course, semesterIndex) {
      const gradeOptions = Object.keys(gpaScale).map(g => `<option value="${g}">${g}</option>`).join('');
      return `
        <tr>
          <td>${course.name}</td>
          <td>${course.credits}</td>
          <td>
            <select onchange="updateGPA()" data-semester="${semesterIndex}" data-name="${course.name}" data-credits="${course.credits}">
              <option value="">--</option>
              ${gradeOptions}
            </select>
          </td>
        </tr>`;
    }

    function populateTables() {
      document.getElementById('s1-table').innerHTML = semester1Courses.map(c => createTableRow(c, 1)).join('');
      document.getElementById('s2-table').innerHTML = semester2Courses.map(c => createTableRow(c, 2)).join('');
    }

    function calculateGPAFromSelects(semesterIndex) {
      const selects = document.querySelectorAll(`select[data-semester='${semesterIndex}']`);
      let totalCredits = 0, totalPoints = 0;
      selects.forEach(sel => {
        const grade = sel.value;
        const credits = parseFloat(sel.dataset.credits);
        if (grade && gpaScale[grade] !== undefined) {
          totalCredits += credits;
          totalPoints += gpaScale[grade] * credits;
        }
      });
      return totalCredits ? (totalPoints / totalCredits).toFixed(2) : '0.00';
    }

    function updateGPA() {
      const gpa1 = calculateGPAFromSelects(1);
      const gpa2 = calculateGPAFromSelects(2);
      document.getElementById('s1-gpa').innerText = `Semester 1 GPA: ${gpa1}`;
      document.getElementById('s2-gpa').innerText = `Semester 2 GPA: ${gpa2}`;

      const selects = document.querySelectorAll('select[data-semester]');
      let totalCredits = 0, totalPoints = 0;
      selects.forEach(sel => {
        const grade = sel.value;
        const credits = parseFloat(sel.dataset.credits);
        if (grade && gpaScale[grade] !== undefined) {
          totalCredits += credits;
          totalPoints += gpaScale[grade] * credits;
        }
      });
      const cgpa = totalCredits ? (totalPoints / totalCredits).toFixed(2) : '0.00';
      document.getElementById('cgpaDisplay').innerText = `Cumulative GPA (CGPA): ${cgpa}`;
    }

    window.onload = () => {
      populateTables();
    };
  </script>
</body>
</html>
